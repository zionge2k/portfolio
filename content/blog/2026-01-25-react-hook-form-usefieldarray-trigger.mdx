---
title: "useFieldArray에서 trigger가 첫 클릭에 안 되는 문제"
description: "React Hook Form의 useFieldArray로 관리하는 배열 필드에서 trigger()가 첫 클릭에 동작하지 않는 원인과 빈 Controller로 해결하는 방법"
date: "2026-01-25"
tags: ["react-hook-form", "useFieldArray"]
published: true
---

## 시나리오

강의 생성 모달에서 "특화 커리큘럼"을 입력하고 "다음" 버튼을 눌렀다.
빈 제목이 있어서 에러 토스트가 떠야 하는데, 첫 번째 클릭에서는 아무 반응이 없었다.
두 번째 클릭부터 토스트가 정상적으로 표시됐다.

## 문제 / 발견

`useFieldArray`로 관리하는 배열 필드는 React Hook Form에 자동으로 "등록"되지 않는다.

그래서 `trigger('specialCurriculums')`를 호출해도:
- 첫 번째 클릭: "그런 필드 없는데?" → 검증 스킵 → 토스트 안 뜸
- 두 번째 클릭: 그 사이에 필드가 등록됨 → 검증 실행 → 토스트 뜸

## 원인 / 이유

`useFieldArray`는 배열의 각 아이템(`specialCurriculums.0.title` 등)만 등록한다.
배열 자체(`specialCurriculums`)는 등록하지 않는다.

그래서 `trigger(['specialCurriculums'])`가 첫 호출에서 필드를 못 찾는다.

## 해결 / 핵심 포인트

**빈 Controller를 추가해서 필드를 강제로 등록한다.**

```tsx
// 아무것도 안 보이지만, 필드를 등록하는 역할
<Controller
  control={control}
  name="specialCurriculums"
  render={() => <></>}
/>
```

이 한 줄이 하는 일:
1. React Hook Form에 "specialCurriculums라는 필드가 있어요"라고 알려줌
2. `trigger()`가 첫 클릭에서도 필드를 찾을 수 있게 됨
3. 검증 실패 시 토스트가 바로 표시됨

## 코드

```tsx
// special-curriculum-fields.tsx

export function LectureCreateSpecialCurriculumFields() {
  const { control } = useFormContext()
  const { fields, append, remove } = useFieldArray({
    control,
    name: 'specialCurriculums',
  })

  return (
    <div>
      {fields.map((f, idx) => (
        <Controller
          key={f.id}
          name={`specialCurriculums.${idx}.title`}
          render={({ field }) => <Input {...field} />}
        />
      ))}

      {/* 이게 핵심! 빈 Controller로 배열 필드 등록 */}
      <Controller
        control={control}
        name="specialCurriculums"
        render={() => <></>}
      />
    </div>
  )
}
```

## 참고

- `useFieldArray`는 동적 배열을 관리하는 훅
- `trigger()`는 특정 필드의 검증을 수동으로 실행하는 함수
- 이 문제는 멀티스텝 폼에서 "다음" 버튼 클릭 시 자주 발생함
